<!DOCTYPE html>
<html lang="#{sessionBean.lang}"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:p="http://primefaces.org/ui">

<f:view locale="#{sessionBean.locale}" encoding="UTF-8" contentType="text/html">


<h:head>
	<title><h:outputText value="#{msg['dialogScript.titulo']}"/></title>

  <f:facet name="last">
    <h:outputStylesheet library="css" name="style.css" />
  </f:facet>
</h:head>

<h:body>

	<!-- Parametros dialogo -->
	<f:metadata>
		<f:viewParam name="MODO_ACCESO" value="#{dialogScript.modoAcceso}"/>
		<f:viewParam name="TIPO_SCRIPT" value="#{dialogScript.tipoScriptParam}"/>
		<f:viewParam name="DATO" value="#{dialogScript.iData}"/>
		<f:viewAction action="#{dialogScript.init}" />
	</f:metadata>
	<h:form id="dialogScript" styleClass="margin-top-10">

			<p:growl id="growlScript" widgetVar="growlScript" life="2000" sticky="false" />
				<p:panel id="panelTop" header="#{msg['script.' += dialogScript.tipoScriptParam += '.titulo']}" toggleable="false" widgetVar="panel" style="padding:0px">
					<h:panelGrid rowClasses=", ui-datatable-odd" columnClasses="padding-left-18 wpx200, padding-right-18 " columns = "2" cellpadding = "5" cellspacing = "0"  style="padding:0px">

						<h:outputLabel value="#{msg['dialogScript.sirve']}"></h:outputLabel>
						<h:outputLabel value="#{msg['script.' += dialogScript.tipoScriptParam += '.sirve']}"></h:outputLabel>

						<h:outputLabel value="#{msg['dialogScript.ejecuta']}"></h:outputLabel>
						<h:outputLabel value="#{msg['script.' += dialogScript.tipoScriptParam += '.ejecuta']}"></h:outputLabel>

						<h:outputLabel value="#{msg['dialogScript.devuelve']}"></h:outputLabel>
						<h:outputLabel value="#{msg['script.' += dialogScript.tipoScriptParam += '.devuelve']}"></h:outputLabel>

					</h:panelGrid>
				</p:panel>
				<h:panelGrid rowClasses=", ui-datatable-odd" columnClasses="padding-left-18, padding-right-18 wpx200" columns = "2" cellpadding = "5" cellspacing = "0"  width="100%">

					<pe:codeMirror id="codeMirror"
        						mode="#{dialogScript.mode}"
        						theme="#{dialogScript.theme}"
    							value="#{dialogScript.data.contenido}"
    							keyMap="#{dialogScript.keymap}"
    							lineNumbers="true"
    							matchBrackets="true"
    							readonly="#{dialogScript.isConsulta()}"

    							 />

    				<p:column rendered="false">
    					<p:panel id="panelHerramientas" header="#{msg['dialogScript.herramientas.header']}" toggleable="true" widgetVar="panelHerramientas"  collapsed="#{dialogScript.visibleHerramientas}">

								 <p:ajax event="toggle" listener="#{dialogScript.onToggle}" update="panelHerramientas panelMensajes panelFormularios panelDominios" />
								 <h:panelGrid columns="2" columnClasses=", wpx25" header="Propietats" rendered="false">

						         	<h:outputText value="DADES PARAMETRE INICIAL" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

						         	<h:outputText value="PLUGIN_AWS" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

					         		<h:outputText value="PLUGIN_DOMINIS" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

									<h:outputText value="PLUGIN_ERROR" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

									<h:outputText value="PLUGIN_LOG" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

									<h:outputText value="PLUGIN_MISSATGEVALIDACIÃ“" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

						         	<h:outputText value="PLUGIN_SESSIO" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

						         	<h:outputText value="PLUGIN_VALIDACIONS" />
						         	<p:commandButton icon="fa fa-bolt" actionListener="#{dialogScript.cancelar()}" process="@this"/>

					      		</h:panelGrid>

							</p:panel>
							<p:panel id="panelMensajes" header="#{msg['dialogScript.validacion.header']}" toggleable="true" widgetVar="panelScripts" collapsed="#{dialogScript.visibleMensajes}">

								<p:ajax event="toggle" listener="#{dialogScript.onToggle}" update="panelHerramientas panelMensajes panelFormularios panelDominios" />
								<h:panelGrid columns="2" header="Scripts">

								 	<h:column><h:outputText value="#{msg['dialogScript.scripts.autorelleno']}" /></h:column>
						         	<h:column><p:commandButton icon="fa fa-bolt" /></h:column>

						        </h:panelGrid>


						    </p:panel>

						    <p:panel id="panelFormularios" header="#{msg['dialogScript.estilos.header']}" toggleable="true" widgetVar="panelEstilos" style="margin-bottom:2px" collapsed="#{dialogScript.visibleFormularios}">

								<p:ajax event="toggle" listener="#{dialogScript.onToggle}" update="panelHerramientas panelMensajes panelFormularios panelDominios" />

								<h:panelGrid columns="2" header="Scripts">

									<h:column><h:outputText value="Estilos" /></h:column>
						         	<h:inputTextarea value="Estilos" />

						        </h:panelGrid>

						    </p:panel>

						    <p:panel id="panelDominios" header="#{msg['dialogScript.dominios.header']}" toggleable="true" widgetVar="panelDominios" style="margin-bottom:2px" collapsed="#{dialogScript.visibleDominios}">

								<p:ajax event="toggle" listener="#{dialogScript.onToggle}" update="panelHerramientas panelMensajes panelFormularios panelDominios" />

								<h:panelGrid columns="2" header="Scripts">
									<h:column><h:outputText value="Dominios" /></h:column>
						         	<h:inputText value="Dominios" />

						        </h:panelGrid>
						    </p:panel>

    					</p:column>
			</h:panelGrid>
			<p:toolbar>
						<f:facet name="right">
			        		<p:commandButton value="#{msg['botones.cerrar']}" actionListener="#{dialogScript.cancelar()}" process="@form" update="@form growlScript"  styleClass="boton-azul" rendered="#{!dialogScript.isEdicion()}" />
							<p:commandButton value="#{msg['botones.aceptar']}" actionListener="#{dialogScript.aceptar()}" process="@form" update="@form growlScript"  styleClass="boton-azul" rendered="#{dialogScript.isEdicion()}" />
							<p:commandButton id="btnEliminar" value="#{msg['botones.borrar']}" icon="fa fa-trash-o" actionListener="#{dialogScript.borrar()}" process="@this" update="growlScript" styleClass="boton-rojo" rendered="#{dialogScript.isEdicion()}" >
		        				<p:confirm header="#{msg['confirm.titulo']}" message="#{msg['confirm.borradoScript']}" icon="fa fa-question-circle fa-3x confirmar_icono"/>
		        			</p:commandButton>
							<p:commandButton value="#{msg['botones.cancelar']}" actionListener="#{dialogScript.cancelar()}" process="@this"  rendered="#{dialogScript.isEdicion()}"  />
						</f:facet>
				</p:toolbar>

			<p:confirmDialog global="true" >
				<p:outputPanel styleClass="confirmar_botonera">
		        	<p:commandButton value="#{msg['botones.si']}" type="button" styleClass="ui-confirmdialog-yes boton-azul" icon="fa fa-check"  process="@form"/>
		        	<p:commandButton value="#{msg['botones.no']}" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-close" process="@this"/>
				</p:outputPanel>
		    </p:confirmDialog>
	</h:form>
</h:body>

</f:view>
</html>
