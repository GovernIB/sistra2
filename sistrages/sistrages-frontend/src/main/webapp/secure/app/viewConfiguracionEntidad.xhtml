<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="../layout/mainLayout.xhtml">

	<f:metadata>
		<f:viewAction action="#{viewConfiguracionEntidad.init}" />
	</f:metadata>


	<ui:define name="content">

		<h:form id="form" styleClass="h100" style="overflow-y: auto;">

			<!-- Growl mensajes -->
			<p:growl id="growl" widgetVar="growl" showDetail="false" life="#{sessionBean.growlLife}" sticky="#{sessionBean.growlSticky}"  />

			<p:panel header="#{msg['viewConfiguracionEntidad.gestorTramits.titulo']}" columnClasses="w25 right-alignment, w75 left-alignment">
		        <h:panelGrid columns="2" cellpadding="5">
		            <h:outputText value="#{msg['viewConfiguracionEntidad.gestorTramits.headerLog']}" />
		           	<p:column>
          				<p:inputText  id="inputUrlCarpetaCiudadana" size="70" style="margin-right:10px" value="#{viewConfiguracionEntidad.data.urlCarpetaCiudadana.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
		            	<p:commandButton id="btnUrlCarpetaCiudadana" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarUrlCarpetaCiudadana}" process="@this" update=":form:growl" styleClass="va-top">
		            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoUrlCarpetaCiudadana}" update=":form:growl inputUrlCarpetaCiudadana"/>
		        		</p:commandButton>
		        	</p:column>
		        </h:panelGrid>
		    </p:panel>

			<p:panel header="#{msg['viewConfiguracionEntidad.assistentTramitacio.titulo']}"  columnClasses="w25 right-alignment, w75 left-alignment">

					<p:tabView id="tabView" activeIndex="0" dynamic="true" style="margin: 30px;" >
	        			<p:tab title="#{msg['viewConfiguracionEntidad.tabPropiedades']}" >
	        				<h:panelGrid id="gridPropiedades" columns="2" cellpadding="5" >
					            <h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.tituloStt']}" />
					            <p:column>
					           		<p:inputText  id="tituloStt" size="70" style="margin-right:10px" value="#{viewConfiguracionEntidad.data.tituloAsistenteTramitacion.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="tituloStt2" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarTituloAsistente}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoTituloAsistente}" update=":form:growl tituloStt"/>
					        		</p:commandButton>
					            </p:column>

					            <h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerLogStt']}" />
					            <p:column>
					            	<h:panelGroup id="btnIconoSistramitTxt">
					           			<h:outputText value="#{msg['error.noexistefitxer']}" rendered="#{empty viewConfiguracionEntidad.data.iconoAsistenteTramitacion}"/>
					           			<p:commandLink action="#{viewConfiguracionEntidad.descargaFichero(viewConfiguracionEntidad.data.iconoAsistenteTramitacion)}" target="_blank" value="#{viewConfiguracionEntidad.data.iconoAsistenteTramitacion.nombre}" rendered="#{!empty viewConfiguracionEntidad.data.iconoAsistenteTramitacion}"/>
					           		</h:panelGroup>
				            		<p:spacer width="20" height="1"/>
					           		<p:commandButton id="btnIconoSistramit" icon="fa fa-cog" process="@this" update=":form:growl" actionListener="#{viewConfiguracionEntidad.gestionFicheroIconoAsistente()}" disabled="#{!viewConfiguracionEntidad.permiteEditar}">
					           			<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoFichero}" update=":form:tabView:btnIconoSistramitTxt :form:growl"/>
					           		</p:commandButton>
					            </p:column>

					            <h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerLog']}" />
					            <p:column>
					            	<h:panelGroup id="btnLogoAsistenteTxt">
					           			<h:outputText value="#{msg['error.noexistefitxer']}" rendered="#{empty viewConfiguracionEntidad.data.logoAsistente}"/>
					           			<p:commandLink action="#{viewConfiguracionEntidad.descargaFichero(viewConfiguracionEntidad.data.logoAsistente)}" target="_blank" value="#{viewConfiguracionEntidad.data.logoAsistente.nombre}" rendered="#{!empty viewConfiguracionEntidad.data.logoAsistente}"/>
					           		</h:panelGroup>
				            		<p:spacer width="20" height="1"/>
					           		<p:commandButton id="btnLogoAsistente" icon="fa fa-cog" process="@this" update=":form:growl" actionListener="#{viewConfiguracionEntidad.gestionFicheroLogoAsistente()}" disabled="#{!viewConfiguracionEntidad.permiteEditar}">
					           			<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoFichero}" update=":form:tabView:btnLogoAsistenteTxt :form:growl"/>
					           		</p:commandButton>
					            </p:column>

					        	<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerCss']}" />
					            <p:column>
					            	<h:panelGroup id="btnCssAsistenteTxt">
					           			<h:outputText value="#{msg['error.noexistefitxer']}" rendered="#{empty viewConfiguracionEntidad.data.css}"/>
					           			<p:commandLink action="#{viewConfiguracionEntidad.descargaFichero(viewConfiguracionEntidad.data.css)}" target="_blank" value="#{viewConfiguracionEntidad.data.css.nombre}" rendered="#{!empty viewConfiguracionEntidad.data.css}"/>
					           		</h:panelGroup>
									<p:spacer width="20" height="1"/>
					           		<p:commandButton id="btnCssAsistente" icon="fa fa-cog" process="@this" update=":form:growl" actionListener="#{viewConfiguracionEntidad.gestionFicheroCssAsistente()}" disabled="#{!viewConfiguracionEntidad.permiteEditar}">
					           			<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoFichero}" update=":form:tabView:btnCssAsistenteTxt :form:growl"/>
					           		</p:commandButton>
								</p:column>

								<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerUrlCarpetaCiudadana']}" />
				            	<p:column>
					            	<p:inputText  id="inputUrlCarpetaCiudadana" size="70" style="margin-right:10px" value="#{viewConfiguracionEntidad.data.urlCarpetaCiudadana.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="btnUrlCarpetaCiudadana" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarUrlCarpetaCiudadana}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoUrlCarpetaCiudadana}" update=":form:growl inputUrlCarpetaCiudadana"/>
					        		</p:commandButton>
								</p:column>

								<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerUrlSedeElectronica']}" />
				            	<p:column>
					            	<p:inputText  id="inputUrlSedeElectronica" size="70" style="margin-right:10px" value="#{viewConfiguracionEntidad.data.urlSede.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="btnUrlSedeElectronica" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarUrlSedeElectronica}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoUrlSedeElectronica}" update=":form:growl inputUrlSedeElectronica"/>
					        		</p:commandButton>
								</p:column>

								<p:outputLabel for="diasPreregistro" value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerDiasPreregistro']}" />
					            <p:inputNumber  id="diasPreregistro" decimalPlaces="0" padControl="false" size="70" value="#{viewConfiguracionEntidad.data.diasPreregistro}" maxValue="999" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>

								<h:outputText value="#{msg['viewConfiguracionEntidad.propiedades.headerPermitirValoraciones']}:" />
			        			<p:column>
			        					<p:selectBooleanCheckbox id="checkPermitirValorar" value="#{viewConfiguracionEntidad.data.valorarTramite}" disabled="#{!viewConfiguracionEntidad.permiteEditar}" styleClass="margin-right-10">
			        						<p:ajax event="change" global="false"  update="btnValoraciones gridPropiedades"  />
	   									</p:selectBooleanCheckbox>
	   								    <p:commandButton id="btnValoraciones" actionListener="#{viewConfiguracionEntidad.abrirValoraciones}" icon="fa fa-cog" process="@this" update=":form:growl"  disabled="#{!viewConfiguracionEntidad.permiteEditar or !viewConfiguracionEntidad.data.valorarTramite}" />
								</p:column>
							</h:panelGrid>

	        			</p:tab>
	        			<p:tab title="#{msg['viewConfiguracionEntidad.tabAyuda']}">
	        				<h:panelGrid styleClass="noBorders" columns="3" cellpadding="10">
		           				<p:selectBooleanCheckbox id="checkEmail" required="true" value="#{viewConfiguracionEntidad.data.emailHabilitado}" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>
								<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.ajuda.email']}" />
							    <p:inputText value="#{viewConfiguracionEntidad.data.email}" size="70"  maxlength="500" disabled="#{!viewConfiguracionEntidad.permiteEditar}" validatorMessage="#{msg['viewConfiguracionEntidad.emailIncorrecto']}">
							    	<f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]"  />
							    </p:inputText>

								<p:selectBooleanCheckbox id="checkTelefonSuport"  value="#{viewConfiguracionEntidad.data.telefonoHabilitado}" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>
								<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.ajuda.telSuport']}"  />
							    <p:inputText value="#{viewConfiguracionEntidad.data.telefono}" size="70"  maxlength="10" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>

								<p:selectBooleanCheckbox id="checkUrlSuportTecnic" value="#{viewConfiguracionEntidad.data.urlSoporteHabilitado}" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>
								<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.ajuda.urlSuport']}" />
							    <p:inputText value="#{viewConfiguracionEntidad.data.urlSoporte}" size="70"  maxlength="500" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>

								<p:selectBooleanCheckbox id="checkFormularioContacto" value="#{viewConfiguracionEntidad.data.formularioIncidenciasHabilitado}" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>
								<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.ajuda.formulariCont']}" />
							    <p:commandButton id="btnFormulariContacte" actionListener="#{viewConfiguracionEntidad.abrirFormularioSoporte}" icon="fa fa-cog" process="@this" update=":form:growl" disabled="#{!viewConfiguracionEntidad.permiteEditar}" />
							</h:panelGrid>
	        			</p:tab>
						<p:tab title="#{msg['viewConfiguracionEntidad.tabPiePagina']}">
							<h:panelGrid styleClass="noBorders" columns="2" cellpadding="10">
				        		<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerContacto']}" />
				        		<p:column>
					        		<p:inputTextarea  id="inputPie" scrollHeight="100" cols="69" rows="5" style="margin-right:10px;height:120px" value="#{viewConfiguracionEntidad.data.pie.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="btnAssistentPie" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarAssistentPie}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoAsistentePie}" update=":form:growl inputPie"/>
					        		</p:commandButton>
								</p:column>

				        		<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerMapaWeb']}" />
				        		<p:column>
					        		<p:inputText  id="inputMapaWeb" size="69" style="margin-right:10px" value="#{viewConfiguracionEntidad.data.mapaWeb.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="btnMapaWeb" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarMapaWeb}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoMapaWeb}" update=":form:growl inputMapaWeb"/>
					        		</p:commandButton>
								</p:column>

				        		<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerAvisoLegal']}" />
				        		<p:column>
					        		<p:inputText id="inputAvisoLegal" size="69" style="margin-right:10px" value="#{viewConfiguracionEntidad.data.avisoLegal.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="btnAvisoLegal" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarAvisoLegal}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoAvisoLegal}" update=":form:growl inputAvisoLegal"/>
					        		</p:commandButton>
								</p:column>

				        		<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerRss']}" />
				        		<p:column>
					        		<p:inputText  id="inputRss" size="69" style="margin-right:10px" value="#{viewConfiguracionEntidad.data.rss.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="btnRss" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarRss}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoRss}" update=":form:growl inputRss"/>
					        		</p:commandButton>
								</p:column>
				        	</h:panelGrid>
	        			</p:tab>
	        			<p:tab title="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerRedesSociales']}">
	        				<h:panelGrid styleClass="noBorders" columns="2" cellpadding="10">
			        			<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerYoutube']}" />
			        			<p:inputText  id="inputUrlYoutube" size="70" value="#{viewConfiguracionEntidad.data.urlYoutube}" maxlength="255" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>

			        			<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerInstagram']}" />
			        			<p:inputText  id="inputUrlInstagram" size="70" value="#{viewConfiguracionEntidad.data.urlInstagram}" maxlength="255" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>

			        			<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerTwitter']}" />
			        			<p:inputText  id="inputUrlTwitter" size="70" value="#{viewConfiguracionEntidad.data.urlTwitter}" maxlength="255" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>

			        			<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerFacebook']}" />
			        			<p:inputText  id="inputUrlFacebook" size="70" value="#{viewConfiguracionEntidad.data.urlFacebook}" maxlength="255" disabled="#{!viewConfiguracionEntidad.permiteEditar}"/>
			        		</h:panelGrid>
	        			</p:tab>
	        			<p:tab title="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerLopdTitulo']}">
	        				<h:panelGrid columns="2" cellpadding="5" >

			        					<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerLopd']}" />
						            	<p:column>
							            	<p:inputTextarea id="inputLopd" autoResize="false" scrollHeight="100" cols="70" rows="5" style="margin-right:10px;height:120px" value="#{viewConfiguracionEntidad.data.lopd.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
							            	<p:commandButton id="btnLopd" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarLopd}" process="@this" update=":form:growl" styleClass="va-top">
							            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoLopd}" update=":form:growl inputLopd"/>
							        		</p:commandButton>
										</p:column>

							</h:panelGrid>
	        			</p:tab>
						<p:tab id="tabRegistro" title="#{msg['viewConfiguracionEntidad.tabRegistro']}">
	        				<h:panelGrid id="panelResgistro" columns="2" cellpadding="5" >
			        					<h:outputText value="#{msg['viewConfiguracionEntidad.registro.headerRegistroCentralizado']}:" />
			        					<p:selectBooleanCheckbox id="checkRegistroCentralizado" value="#{viewConfiguracionEntidad.data.registroCentralizado}" disabled="#{!viewConfiguracionEntidad.permiteEditar}">
			        						<p:ajax event="change" global="false"  update="oficina panelResgistro"  />
	   									</p:selectBooleanCheckbox>

	   									<h:outputText value="#{msg['viewConfiguracionEntidad.registro.headerOficinaRegistro']}:" rendered="#{viewConfiguracionEntidad.data.registroCentralizado}" />
			        					<p:selectOneMenu id="oficina" styleClass="w90" value="#{viewConfiguracionEntidad.data.oficinaRegistroCentralizado}"  rendered="#{viewConfiguracionEntidad.data.registroCentralizado}" required="#{viewConfiguracionEntidad.data.registroCentralizado}" requiredMessage="#{msg['viewConfiguracionEntidad.registro.oficinaRegistroObligatoria']}" >
						    				<f:selectItem noSelectionOption="true" itemLabel=" " itemValue=""></f:selectItem>
						    				<f:selectItems value="#{viewConfiguracionEntidad.oficinas}"  itemLabel="#{oficina.nombre}" itemValue="#{oficina.codigo}" var="oficina"  />
										</p:selectOneMenu>

										<h:outputText value="#{msg['viewConfiguracionEntidad.registro.headerOcultarDescargaDoc']}:" />
			        					<p:selectBooleanCheckbox id="checkOcultarDescargaDocumentos" value="#{viewConfiguracionEntidad.data.registroOcultarDescargaDocumentos}" disabled="#{!viewConfiguracionEntidad.permiteEditar}" />

										<h:outputText value="#{msg['viewConfiguracionEntidad.registro.plantillaMailFinRegistro']}:" />
			        					<p:commandButton id="btnPlantillaMail" icon="fa fa-cog" actionListener="#{viewConfiguracionEntidad.explorarPlantillaMail}" process="@this" update=":form:growl" styleClass="va-top" />

							</h:panelGrid>
	        			</p:tab>
	        			<p:tab title="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerDeclaracionAccesibilidad']}">
	        				<h:panelGrid styleClass="noBorders" columns="2" cellpadding="10">
			        			<h:outputText value="#{msg['viewConfiguracionEntidad.assistentTramitacio.headerDeclaracionAccesibilidad']} (HTML)" />
			        			<p:column>
					        		<p:inputTextarea  id="inputAcc" scrollHeight="100" cols="69" rows="5" style="margin-right:10px;height:120px" value="#{viewConfiguracionEntidad.data.accesibilidad.getTraduccion(sessionBean.lang,sessionBean.idiomas)}" disabled="true" styleClass="margin-right-10"/>
					            	<p:commandButton id="btnAssistentAcc" icon="fa fa-language" actionListener="#{viewConfiguracionEntidad.explorarAssistentAcc}" process="@this" update=":form:growl" styleClass="va-top">
					            		<p:ajax event="dialogReturn" listener="#{viewConfiguracionEntidad.returnDialogoAsistenteAcc}" update=":form:growl inputAcc"/>
					        		</p:commandButton>
								</p:column>
			        		</h:panelGrid>
	        			</p:tab>
	        		</p:tabView>
			</p:panel>
			<!-- Toolbar -->
			<p:toolbar id="toolbar">
				<f:facet name="right">
				 	<p:commandButton id="btnAceptar"  value="#{msg['botones.guardar']}" icon="fa fa-check" actionListener="#{viewConfiguracionEntidad.aceptar()}" process="@form" update="growl form:tabView:panelResgistro" styleClass="boton-azul" style="margin-right:20px" rendered="#{viewConfiguracionEntidad.permiteEditar}"/>
				 	<p:commandButton id="btnHelp" value="#{msg['botones.ayuda']}" icon="fa fa-question-circle-o" actionListener="#{viewConfiguracionEntidad.ayuda()}" process="@this" update="growl"/>
				</f:facet>
			</p:toolbar>

		</h:form>

	</ui:define>

</ui:composition>
