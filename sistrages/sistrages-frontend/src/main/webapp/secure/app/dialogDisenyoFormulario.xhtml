<!DOCTYPE html>
<html lang="#{sessionBean.lang}"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<f:view locale="#{sessionBean.locale}" encoding="UTF-8" contentType="text/html">

<h:head>
	<title><h:outputText value="#{msg['dialogDisenyoFormulario.titulo']}"/></title>
</h:head>

<h:body>
    <f:facet name="last">
    	<h:outputStylesheet library="css" name="style.css" />
    </f:facet>
	<!-- Parametros dialogo -->
	<f:metadata>
		<f:viewParam name="MODO_ACCESO" value="#{dialogDisenyoFormulario.modoAcceso}"/>
		<f:viewParam name="ID" value="#{dialogDisenyoFormulario.id}"/>
		<f:viewAction action="#{dialogDisenyoFormulario.init}" />
	</f:metadata>

	<!-- Growl mensajes -->
	<p:growl id="growlDisenyoFormulario" widgetVar="growlDisenyoFormulario" showDetail="false" life="2000" sticky="false" />

	<h:form id="dialogDisenyoFormulario" >

		<!--  Toolbar -->
		<p:toolbar>
			<p:toolbarGroup align="left">


				<p:commandButton id="btnFormulario" value="#{msg['dialogDisenyoFormulario.formulario']}" icon="fa fa-file-text-o" actionListener="#{dialogDisenyoFormulario.abrirPropiedadesFormulario}" process="@this" update="growlDisenyoFormulario">
					<p:ajax event="dialogReturn" listener="#{dialogDisenyoFormulario.returnDialogo}" update="growlDisenyoFormulario componente-panel formulario-panel botonera"/>
				</p:commandButton>
				<p:commandButton id="btnPagina" value="#{msg['dialogDisenyoFormulario.pagina']}" icon="fa fa-file-o" actionListener="#{dialogDisenyoFormulario.sinImplementar()}" process="@this" update="growlDisenyoFormulario"/>

				<span class="ui-separator margin-right-10">
                	<span class="ui-icon ui-icon-grip-dotted-vertical" />
           		</span>

				<h:panelGroup class="barra-herramientas-disenyo">
					<p:outputLabel value="#{msg['dialogDisenyoFormulario.componente']}"/>
		       		<p:commandButton id="btnSeccion" 		title="#{msg['dialogDisenyoFormulario.componente.SC']}" icon="fa fa-list-ul" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario"/>
		       		<p:commandButton id="btnEtiqueta" 		title="#{msg['dialogDisenyoFormulario.componente.ET']}" icon="fa fa-font" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario"/>
		       		<p:commandButton id="btnImagen" 		title="#{msg['dialogDisenyoFormulario.componente.IM']}" icon="fa fa-image" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario"/>
		       		<p:commandButton id="btnCampoTexto" 	title="#{msg['dialogDisenyoFormulario.componente.CT']}" icon="fa fa-square" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario"/>
					<p:commandButton id="btnCampoSelector" 	title="#{msg['dialogDisenyoFormulario.componente.SE']}" icon="fa fa-caret-square-o-down" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario"/>
		       		<p:commandButton id="btnCampoCheckbox" 	title="#{msg['dialogDisenyoFormulario.componente.CK']}" icon="fa fa-check-square" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario"/>
		       		<p:commandButton id="btnCaptcha" 		title="#{msg['dialogDisenyoFormulario.componente.CP']}" icon="fa fa-retweet" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario"/>
				</h:panelGroup>

	       		<span class="ui-separator margin-right-10">
                	<span class="ui-icon ui-icon-grip-dotted-vertical" />
           		</span>

				<h:panelGroup class="barra-herramientas-disenyo">
					<p:outputLabel for="posicionamiento" value="#{msg['dialogDisenyoFormulario.posicionamiento']}"/>
					<p:selectOneButton id="posicionamiento" value="#{dialogDisenyoFormulario.posicionamiento}">
            			<f:selectItem itemLabel="#{msg['dialogDisenyoFormulario.posicionamiento.previo']}" itemValue="A" />
            			<f:selectItem itemLabel="#{msg['dialogDisenyoFormulario.posicionamiento.posterior']}" itemValue="D" />
            		</p:selectOneButton>
				</h:panelGroup>

			</p:toolbarGroup>
			<p:toolbarGroup align="right">
				<p:commandButton id="btnHelp" title="#{msg['botones.ayuda']}" icon="fa fa-question-circle-o" actionListener="#{dialogDisenyoFormulario.ayudar}" process="@this" update="growlDisenyoFormulario"/>
			</p:toolbarGroup>
		</p:toolbar>


		<!-- Remote command invocado al seleccionar componente en iframe -->
		<p:remoteCommand name="seleccionarElementoCommand"
		 		actionListener="#{dialogDisenyoFormulario.editarComponente}"
				process="@this" update="componente-panel, growlDisenyoFormulario" />


		<!-- Dialogo confirmar cambios desde view a traves de boton oculto -->
	    <p:commandButton value="Confirmation" id="confirmationButton" widgetVar="confirmationButton" onclick="PF('dlgConfirmar').show();" style="display: none"  />

	    <p:dialog header="Confirmar cambios" id="dlgConfirmar" widgetVar="dlgConfirmar" modal="true">
            <h:outputText value="Â¿Desea confirmar" />
            <p:commandButton value="Si" actionListener="#{dialogDisenyoFormulario.confirmacionCambios}" onclick="PF('dlgConfirmar').hide();" process="@this"  update="growlDisenyoFormulario, componente-panel, formulario-panel" />
            <p:commandButton value="No" actionListener="#{dialogDisenyoFormulario.descartarCambios}"  onclick="PF('dlgConfirmar').hide();" process="@this"  update="growlDisenyoFormulario, componente-panel, formulario-panel"  />
        </p:dialog>
	</h:form>

	<!-- Workpanel: Iframe HTML + Editor campos  -->
	<h:panelGrid columns="2" columnClasses="w70 grid-left va-top formulario-panel, w30 grid-left va-top formulario-panel" styleClass="w100">

		<p:outputPanel id="formulario-panel" styleClass="w100 h100">
			<iframe id="formulario-frame" name="formulario-frame"  src="#{dialogDisenyoFormulario.urlIframe}" class="formulario-frame">
			  <p>Tu navegador no soporta iframes.</p>
			</iframe>
		 </p:outputPanel>

		<p:panel id="componente-panel" styleClass="h100 sin-bordes noPadding" header="#{msg['dialogDisenyoFormulario.componente.panelPropiedadesElemento']}" toggleable="false" >
		   <ui:include src="#{dialogDisenyoFormulario.panelPropiedadesUrl}">
		   </ui:include>
		 </p:panel>
	</h:panelGrid>


	<!-- Botonera abajo -->

	<p:outputPanel styleClass="botonera" id="botonera">
		<p:panelGrid columns="3" columnClasses="w30,w40,w30" layout="grid" styleClass="formulario-botonera">


			<p:outputPanel styleClass="barra-herramientas-disenyo" id="barra-herramientas-disenyo">
				<p:commandButton icon="fa fa-chevron-left"  id="izq" actionListener="#{dialogDisenyoFormulario.moverPaginaIzq}" process="@this" update="growlDisenyoFormulario, formulario-panel, barra-herramientas-disenyo" disabled="#{!dialogDisenyoFormulario.habilitadoBtnPagIzq}"/>
				<p:outputLabel value="Pag " /><p:outputLabel id="paginaActual" value="#{dialogDisenyoFormulario.paginaActual}" /><p:outputLabel value="/" /><p:outputLabel value="#{dialogDisenyoFormulario.numeroPaginas}" />
				<p:commandButton icon="fa fa-chevron-right" id="der" actionListener="#{dialogDisenyoFormulario.moverPaginaDer}" process="@this" update="growlDisenyoFormulario, formulario-panel, barra-herramientas-disenyo" disabled="#{!dialogDisenyoFormulario.habilitadoBtnPagDer}"/>
			</p:outputPanel>

			<p:outputPanel>
				<p:commandButton value="#{msg['dialogDisenyoFormulario.botones.aplicarCambios']}" actionListener="#{dialogDisenyoFormulario.aplicarCambios}" process="@this" update="growlDisenyoFormulario, formulario-panel" />
				<p:commandButton value="#{msg['dialogDisenyoFormulario.botones.borrarComponente']}" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario, formulario-panel" />
				<p:commandButton value="#{msg['dialogDisenyoFormulario.botones.verEstructura']}" actionListener="#{dialogDisenyoFormulario.sinImplementar}" process="@this" update="growlDisenyoFormulario, formulario-panel" />
			</p:outputPanel>

			<p:outputPanel styleClass="confirmar_botonera">
				<p:commandButton value="#{msg['botones.cerrar']}" actionListener="#{dialogDisenyoFormulario.cancelar}" process="@this"/>
			</p:outputPanel>
		</p:panelGrid>
	</p:outputPanel>



</h:body>

</f:view>
</html>
