<!DOCTYPE html>
<html lang="#{sessionBean.lang}"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<f:view locale="#{sessionBean.locale}" encoding="UTF-8" contentType="text/html">
<p:importEnum type="es.caib.sistrages.core.api.model.types.TypeScriptFormulario" var="TypeScriptFormulario" />

<h:head>
	<title><h:outputText value="#{msg['dialogPropiedadesFormulario.titulo']}"/></title>
</h:head>

<h:body>
  	<f:facet name="last">
    	<h:outputStylesheet library="css" name="style.css" />
  	</f:facet>

	<!-- Parametros dialogo -->
	<f:metadata>
		<f:viewParam name="MODO_ACCESO" value="#{dialogPropiedadesFormulario.modoAcceso}"/>
		<f:viewParam name="ID" value="#{dialogPropiedadesFormulario.id}"/>
		<f:viewParam name="FORMULARIO_ACTUAL" value="#{dialogPropiedadesFormulario.idFormularioTramite}"/>
		<f:viewParam name="TRAMITEVERSION" value="#{dialogPropiedadesFormulario.idTramiteVersion}"/>
		<f:viewAction action="#{dialogPropiedadesFormulario.init}" />
	</f:metadata>
	<h:form styleClass="margin-top-10" id="form">

			<p:contextMenu id="mainCm" widgetVar="mainCm">
                <p:menuitem id="mnuCopy" value="#{msg['botones.copiar']}" icon="fa fa-clipboard" styleClass="w90" process="@this :form:auxCopiar" update="growlDialog" url="javascript:void(0)"/>
            </p:contextMenu>
            <pe:clipboard id="clipContextCopy" trigger="mnuCopy" action="copy" target="auxCopiar">
                <p:ajax event="success" listener="#{dialogPropiedadesFormulario.copiadoCorr}" process="@this" update="@this growlDialog"/>
                <p:ajax event="error" listener="#{dialogPropiedadesFormulario.copiadoErr}" update="@this growlDialog"/>
            </pe:clipboard>

           <p:inputText id="auxCopiar" value="#{dialogPropiedadesFormulario.portapapeles}" style="padding:0px; opacity:0; width: 1px; height:1px; cursor:default;"/>

  			<p:outputPanel>
				<!-- Contenido dialogo -->
				<!-- Growl mensajes -->
				<p:growl id="growlDialog" widgetVar="growlDialog" life="#{sessionBean.growlLife}" sticky="#{sessionBean.growlSticky}"  />

				<h:panelGrid rowClasses=",ui-datatable-odd" columnClasses="w25 padding-left-18,w75" styleClass="w100" columns="2" cellpadding="5">
					<p:outputLabel for="permitirAccionesPersonalizadas" value="#{msg['dialogPropiedadesFormulario.permitirAccionesPersonalizadas']}" rendered="false"/>
				 	<p:selectBooleanCheckbox id="permitirAccionesPersonalizadas" value="#{dialogPropiedadesFormulario.data.permitirAccionesPersonalizadas}" disabled="#{dialogPropiedadesFormulario.consulta}"  rendered="false"/>

					<p:outputLabel for="cabeceraFormulario" value="#{msg['dialogPropiedadesFormulario.cabeceraFormulario']}" />
					<p:outputPanel>
					 	<p:selectBooleanCheckbox id="cabeceraFormulario" value="#{dialogPropiedadesFormulario.data.mostrarCabecera}" styleClass="margin-right-10" disabled="#{dialogPropiedadesFormulario.consulta}">
					 		<p:ajax update="@form" event="change"/>
					 	</p:selectBooleanCheckbox>

						<p:outputLabel for="textoCabeceraHidden" value="#{msg['dialogPropiedadesFormulario.textoCabecera']}" styleClass="no-display"/>
						<p:inputText id="textoCabecera" value="#{dialogPropiedadesFormulario.literal}" readonly="true" required="true" size="80" styleClass="margin-right-10 #{not textoCabeceraComponent.valid ? 'ui-state-error' : ''}"/>
						<p:inputText id="textoCabeceraHidden" value="#{dialogPropiedadesFormulario.literal}" type="hidden" required="#{dialogPropiedadesFormulario.data.mostrarCabecera}" binding="#{textoCabeceraComponent}"/>
						<p:commandButton id="btnNombre" icon="fa fa-language" actionListener="#{dialogPropiedadesFormulario.editarTextoCabecera}" process="@this" update="growlDialog" styleClass="va-top" disabled="#{!dialogPropiedadesFormulario.data.mostrarCabecera}" >
		            		<p:ajax event="dialogReturn" listener="#{dialogPropiedadesFormulario.returnDialogo}" update="growlDialog textoCabecera textoCabeceraHidden" />
		        		</p:commandButton>
					</p:outputPanel>

					<p:outputLabel value="#{msg['dialogPropiedadesFormulario.admPagina']}"/>
					<h:panelGrid columns="3" columnClasses="w30, w30, w60 va-top">
						<p:dataTable  id="dataTablePaginas" var="td" value="#{dialogPropiedadesFormulario.data.paginas}"
										  rows="0" emptyMessage="#{msg['error.emptyRows']}"
										  scrollable="true" scrollHeight="98%"
				                          paginator="false" style="height:162px;width:620px"
				                          selectionMode="single" selection="#{dialogPropiedadesFormulario.paginaSeleccionada}" rowKey="#{td.orden}">

							<!-- Necesario para actualizar en controlador la fila seleccionada -->
							<p:ajax event="rowSelect" global="false"/>
							<p:ajax event="rowUnselect"/>
							<p:ajax event="contextMenu" global="false" process="@this" update="@form:botonesPagina"/>

							<!-- Columnas -->
						    <p:column class="ui-panelgrid-cell w75" headerText="#{msg['dialogPropiedadesFormulario.pagina']}">
						        <h:outputText value="#{msg['dialogDisenyoFormulario.pagina'].concat(' ').concat(td.orden)}" />
						    </p:column>
						    <p:column class="ui-panelgrid-cell w75" headerText="#{msg['dialogPropiedadesFormulario.identificador']}">
						        <h:outputText value="#{td.identificador}" />
						    </p:column>
						    <p:column class="ui-panelgrid-cell w25 grid-center" headerText="#{msg['dialogPropiedadesFormulario.paginaFinal']}" >
						       <p:selectBooleanCheckbox value="#{td.paginaFinal}" disabled="true"/>
						    </p:column>

				 		</p:dataTable>
				 		<p:outputPanel styleClass="barra-herramientas-vertical" style="margin-left:5px" id="botonesPagina">
						    	<p:commandButton id="btnNuevaPagina" icon="fa fa-plus" title="#{msg['botones.nuevo']}" actionListener="#{dialogPropiedadesFormulario.nuevaPagina}" process="@this permitirGuardarSinFinalizar" update="growlDialog dataTablePaginas btnEditarPagina permitirGuardarSinFinalizar" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}" />
								<ui:fragment rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>
								<p:commandButton id="btnEditarPagina" icon="fa fa-edit" title="#{msg['botones.editar']}" actionListener="#{dialogPropiedadesFormulario.editarPagina}" process="@this" update="growlDialog" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}">
								<p:confirm  header="#{msg['warning.titulo']}"  disabled="#{dialogPropiedadesFormulario.editar}" message="#{msg['dialogPropiedadesFormulario.antesEditar']}" icon="fa fa-exclamation-triangle fa-3x confirmar_icono"/>
									<p:ajax event="dialogReturn" listener="#{dialogPropiedadesFormulario.returnDialogoPagina}" update="growlDialog dataTablePaginas btnEditarPagina"/>
	        					</p:commandButton>
	        					<ui:fragment rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>

						    	<p:commandButton id="btnEliminarPagina" icon="fa fa-minus"  title="#{msg['botones.eliminar']}" actionListener="#{dialogPropiedadesFormulario.eliminarPagina}" process="@this permitirGuardarSinFinalizar" update="growlDialog dataTablePaginas btnEditarPagina permitirGuardarSinFinalizar" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}" >
						    		<p:confirm header="#{msg['confirm.titulo']}" message="#{msg['confirm.borrado']}" icon="fa fa-question-circle fa-3x confirmar_icono"/>
					    		</p:commandButton>
								<ui:fragment rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>

						    	<p:commandButton icon="fa fa-arrow-up" title="#{msg['botones.subir']}" actionListener="#{dialogPropiedadesFormulario.subirPagina}" process="@this" update="growlDialog dataTablePaginas btnEditarPagina" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}" />
								<ui:fragment rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>

						    	<p:commandButton icon="fa fa-arrow-down" title="#{msg['botones.bajar']}" actionListener="#{dialogPropiedadesFormulario.bajarPagina}" process="@this" update="growlDialog dataTablePaginas btnEditarPagina" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}" />

						    	<p:commandButton id="btnConsultarPagina" icon="fa fa-eye" title="#{msg['botones.consultar']}" actionListener="#{dialogPropiedadesFormulario.consultarPagina}" process="@this" update="growlDialog" rendered="#{!dialogPropiedadesFormulario.alta and !dialogPropiedadesFormulario.edicion}" />

						</p:outputPanel>
			 		</h:panelGrid>

			 		<p:outputLabel value="#{msg['dialogPropiedadesFormulario.plantillaPDF']}"/>
					<h:panelGrid columns="2" columnClasses="w40,w60 va-top">
						<p:dataTable  id="dataTablePlantillas" var="td" value="#{dialogPropiedadesFormulario.data.plantillas}"
										  rows="0" emptyMessage="#{msg['error.emptyRows']}" sortBy="#{dialogPropiedadesFormulario.getDescripcionFormateador(td.idFormateadorFormulario)}"
										  scrollable="true" scrollHeight="98%"
				                          paginator="false" style="height:132px;width:620px"
				                          selectionMode="single" selection="#{dialogPropiedadesFormulario.plantillaSeleccionada}" rowKey="#{td.hashCode}">

							<!-- Necesario para actualizar en controlador la fila seleccionada -->
							<p:ajax event="rowSelect" global="false" update="form:filesPlantilla"/>
							<p:ajax event="rowUnselect" update="form:filesPlantilla"/>
							<p:ajax event="contextMenu" global="false" process="@this" update="@form:botonesPlantilla"/>

							<!-- Columnas -->
							<p:column headerText="#{msg['dialogPropiedadesFormulario.formateador']}" styleClass="ui-panelgrid-cell w20" >
						        <h:outputText value="#{dialogPropiedadesFormulario.getDescripcionFormateador(td.idFormateadorFormulario)}" />
						    </p:column>
							<p:column headerText="#{msg['dialogPropiedadesFormulario.identificador']}" styleClass="ui-panelgrid-cell w20" >
						        <h:outputText value="#{td.identificador}" />
						    </p:column>
						    <p:column  headerText="#{msg['dialogPropiedadesFormulario.descripcion']}" styleClass="ui-panelgrid-cell w45">
						        <h:outputText value="#{td.descripcion}" />
						    </p:column>
		   					<p:column headerText="#{msg['dialogPropiedadesFormulario.porDefecto']}" styleClass="ui-panelgrid-cell w15 grid-center">
						        <p:selectBooleanCheckbox value="#{td.porDefecto}" disabled="true"/>
						    </p:column>


				 		</p:dataTable>
				 		 	<p:outputPanel styleClass="barra-herramientas-vertical" style="margin-left:5px" id="botonesPlantilla">
						    	<p:commandButton id="btnNuevaPlantilla" icon="fa fa-plus" title="#{msg['botones.nuevo']}" actionListener="#{dialogPropiedadesFormulario.nuevaPlantilla}" process="@this" update="growlDialog dataTablePlantillas" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}">
						    		<p:ajax event="dialogReturn" listener="#{dialogPropiedadesFormulario.returnDialogoPlantilla}" update="growlDialog dataTablePlantillas"/>
						    	</p:commandButton>
								<ui:fragment rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>

								<p:commandButton id="btnEditarPlantilla" icon="fa fa-edit" title="#{msg['botones.editar']}" actionListener="#{dialogPropiedadesFormulario.editarPlantilla}" process="@this" update="growlDialog" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}">
	        						<p:ajax event="dialogReturn" listener="#{dialogPropiedadesFormulario.returnDialogoPlantilla}" update="growlDialog"/>
	        					</p:commandButton>
	        					<ui:fragment rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>

						    	<p:commandButton id="btnEliminarPlantilla" icon="fa fa-minus" title="#{msg['botones.eliminar']}" actionListener="#{dialogPropiedadesFormulario.eliminarPlantilla}" process="@this" update="growlDialog dataTablePlantillas" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}">
						    		<p:confirm header="#{msg['confirm.titulo']}" message="#{msg['confirm.borrado']}" icon="fa fa-question-circle fa-3x confirmar_icono"/>
					    		</p:commandButton>
						    	<ui:fragment rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>

								<p:commandButton id="btnConsultarPlantilla" icon="fa fa-eye" title="#{msg['botones.consultar']}" actionListener="#{dialogPropiedadesFormulario.consultarPlantilla}" process="@this" update="growlDialog" rendered="#{!dialogPropiedadesFormulario.alta and !dialogPropiedadesFormulario.edicion}" />
								<ui:fragment rendered="#{!dialogPropiedadesFormulario.alta and !dialogPropiedadesFormulario.edicion}"><br /></ui:fragment>

								<p:commandButton id="filesPlantilla" icon="fa fa-file-o" title="#{msg['dialogPropiedadesFormulario.botonIdioma']}" actionListener="#{dialogPropiedadesFormulario.editarFicheroPlantilla}"
												process="@this" update="growlDialog">
									<p:confirm disabled="#{empty dialogPropiedadesFormulario.plantillaSeleccionada or dialogPropiedadesFormulario.plantillaSeleccionada.codigo gt 0}" header="#{msg['warning.titulo']}" message="#{msg['dialogPropiedadesFormulario.debeAplicar']}" icon="fa fa-exclamation-triangle fa-3x confirmar_icono"/>
									<p:ajax event="dialogReturn" update="@form growlDialog"/>
								</p:commandButton>



								<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
							        <p:commandButton value="#{msg['botones.si']}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" process="@this"/>
							        <p:commandButton value="#{msg['botones.no']}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" process="@this"/>
							    </p:confirmDialog>

							</p:outputPanel>
			 		</h:panelGrid>

					<p:outputLabel value="#{msg['dialogPropiedadesFormulario.scriptFormateador']}"/>

					<p:commandButton id="scriptPlantilla" icon="fa fa-bolt"  actionListener="#{dialogPropiedadesFormulario.editarDialogScriptPlantilla(TypeScriptFormulario.SCRIPT_PLANTILLA_PDF_DINAMICA.name(), dialogPropiedadesFormulario.data.scriptPlantilla)}" process="@this" update="growlDialog"
									styleClass="#{dialogPropiedadesFormulario.getColorScript(dialogPropiedadesFormulario.data.scriptPlantilla)}" >
						<p:ajax event="dialogReturn" listener="#{dialogPropiedadesFormulario.returnDialogoScriptPlantilla}" update="growlDialog scriptPlantilla" />
					</p:commandButton>

					<p:outputLabel value="#{msg['dialogPropiedadesFormulario.permitirGuardarSinFinalizar']}"/>
					<p:selectBooleanCheckbox id="permitirGuardarSinFinalizar" value="#{dialogPropiedadesFormulario.data.permitirGuardarSinFinalizar}" disabled="#{dialogPropiedadesFormulario.consulta or dialogPropiedadesFormulario.data.paginas.size() &lt; 2}" styleClass="margin-right-10"  />

				</h:panelGrid>

			</p:outputPanel>
		  	 <p:outputPanel styleClass="botonera">
		     	<p:toolbar>
					<f:facet name="right">
		        		<p:commandButton value="#{msg['botones.guardar']}" actionListener="#{dialogPropiedadesFormulario.guardar}" process="@form" update="@form growlDialog" styleClass="boton-azul" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"/>
						<p:commandButton value="#{msg['botones.cancelar']}" actionListener="#{dialogPropiedadesFormulario.cancelar}" process="@this" rendered="#{dialogPropiedadesFormulario.alta or dialogPropiedadesFormulario.edicion}"/>
						<p:commandButton value="#{msg['botones.cerrar']}" actionListener="#{dialogPropiedadesFormulario.cancelar}" process="@this"  rendered="#{dialogPropiedadesFormulario.consulta}"/>
						<p:commandButton id="btnHelp" value="#{msg['botones.ayuda']}" icon="fa fa-question-circle-o" actionListener="#{dialogPropiedadesFormulario.ayuda()}" process="@this"/>
					</f:facet>
				</p:toolbar>
		    </p:outputPanel>

			<!-- dialogo para confirmar -->
            <p:confirmDialog global="true" >
                <p:outputPanel styleClass="confirmar_botonera">
                    <p:commandButton value="#{msg['botones.si']}" type="button" styleClass="ui-confirmdialog-yes boton-azul" icon="fa fa-check"  process="@form"/>
                    <p:commandButton value="#{msg['botones.no']}" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-close" process="@this"/>
                </p:outputPanel>
            </p:confirmDialog>

			<h:outputScript >

	             window.onload=function(){
	                let contextMenu =  document.getElementsByClassName('ui-contextmenu')[0];
	                onVisible(contextMenu, () => eliminarResaltar());



	               document.addEventListener('contextmenu', function(ev) {
	                    ev.preventDefault();
	                    getPos();
	                    return false;
	                }, false);
	              }



	               function eliminarResaltar(){
	                    let contextMenu =  document.getElementsByClassName('ui-contextmenu')[0];
	                      let elementos = document.getElementsByClassName('resaltar');
	                      if(contextMenu!=null &amp;&amp; contextMenu.style.display=='none' &amp;&amp; elementos.length &gt; 0){
	                        for(let i = 0; i &lt; elementos.length; i++){
	                            elementos[i].classList.remove('resaltar');
	                        }
	                      }
	                }



	               function onVisible(element, callback) {
	                  new IntersectionObserver((entries, observer) => {
	                    entries.forEach(entry => {
	                      if(entry.intersectionRatio == 0) {
	                        callback(element);
	                      }
	                    });
	                  }).observe(element);
	                }


	             function getPos(){
	                 var e = window.event;



	               var posX = e.clientX;
	                var posY = e.clientY;
	                var el = document.elementFromPoint(posX, posY);



	               let elementos = document.getElementsByClassName('resaltar');
	                      if(elementos.length &gt; 0){
	                        for(let i = 0; i &lt; elementos.length; i++){
	                            elementos[i].classList.remove('resaltar');
	                        }
	                      }



	               el.classList.add("resaltar");
	                var aux = document.getElementById("form:auxCopiar");
	                if(el.textContent!=''){
	                    aux.value = el.textContent;
	                }else if(el.firstChild!=null){
	                    aux.value = el.firstChild.value;
	                }else if(el.value!=null &amp;&amp; el.value!=''){
	                    aux.value = el.value;
	                }

	             }

	             function opcPagina(){
	             	if(document.getElementById("form:btnNuevaPagina")!=null){
						document.getElementById("form:mnuNuevaPagina").style.display='block';
	             	}else{
						document.getElementById("form:mnuNuevaPagina").style.display='none';
	             	}

	             	if(document.getElementById("form:btnEditarPagina")!=null){
						document.getElementById("form:mnuEditarPagina").style.display='block';
	             	}else{
						document.getElementById("form:mnuEditarPagina").style.display='none';
	             	}

	             	if(document.getElementById("form:btnEliminarPagina")!=null){
						document.getElementById("form:mnuEliminarPagina").style.display='block';
	             	}else{
						document.getElementById("form:mnuEliminarPagina").style.display='none';
	             	}

	             	if(document.getElementById("form:btnConsultarPagina")!=null){
						document.getElementById("form:mnuConsultarPagina").style.display='block';
	             	}else{
						document.getElementById("form:mnuConsultarPagina").style.display='none';
	             	}
	             }

	             function opcPlantilla(){
	             	if(document.getElementById("form:btnNuevaPlantilla")!=null){
						document.getElementById("form:mnuNuevaPlantilla").style.display='block';
	             	}else{
						document.getElementById("form:mnuNuevaPlantilla").style.display='none';
	             	}

	             	if(document.getElementById("form:btnEditarPlantilla")!=null){
						document.getElementById("form:mnuEditarPlantilla").style.display='block';
	             	}else{
						document.getElementById("form:mnuEditarPlantilla").style.display='none';
	             	}

	             	if(document.getElementById("form:btnEliminarPlantilla")!=null){
						document.getElementById("form:mnuEliminarPlantilla").style.display='block';
	             	}else{
						document.getElementById("form:mnuEliminarPlantilla").style.display='none';
	             	}

	             	if(document.getElementById("form:btnConsultarPlantilla")!=null){
						document.getElementById("form:mnuConsultarPlantilla").style.display='block';
	             	}else{
						document.getElementById("form:mnuConsultarPlantilla").style.display='none';
	             	}
	             }

            </h:outputScript>

			<p:contextMenu for="dataTablePaginas" id="cMenuPaginas" widgetVar="cMenuPaginasWV" beforeShow="opcPagina()">
                <p:menuitem id="mnuCopyPagina" value="#{msg['botones.copiar']}" icon="fa fa-clipboard" styleClass="w90" process="@this :form:auxCopiar" update="growlDialog" url="javascript:void(0)"/>
				<p:menuitem id="mnuNuevaPagina" value="#{msg['botones.nuevo']}" icon="fa fa-file" process="@this" onclick="document.getElementById('form:btnNuevaPagina').click();" />
				<p:menuitem id="mnuEditarPagina" value="#{msg['botones.editar']}" icon="fa fa-edit" process="@this" onclick="document.getElementById('form:btnEditarPagina').click();"/>
				<p:menuitem id="mnuEliminarPagina" value="#{msg['botones.eliminar']}" icon="fa fa-trash-o" process="@this" onclick="document.getElementById('form:btnEliminarPagina').click();" />

				<p:menuitem id="mnuConsultarPagina" value="#{msg['botones.consultar']}" icon="fa fa-trash-o" process="@this" onclick="document.getElementById('form:btnConsultarPagina').click();" />
            </p:contextMenu>
            <pe:clipboard id="clipContextCopyPaginas" trigger="mnuCopyPagina" action="copy" target="auxCopiar">
                <p:ajax event="success" listener="#{dialogPropiedadesFormulario.copiadoCorr}" process="@this" update="@this growlDialog"/>
                <p:ajax event="error" listener="#{dialogPropiedadesFormulario.copiadoErr}" update="@this growlDialog"/>
            </pe:clipboard>

            <p:contextMenu for="dataTablePlantillas" id="cMenuPlantillas" widgetVar="cMenuPlantillasWV" beforeShow="opcPlantilla()">
                <p:menuitem id="mnuCopyPlantilla" value="#{msg['botones.copiar']}" icon="fa fa-clipboard" styleClass="w90" process="@this :form:auxCopiar" update="growlDialog" url="javascript:void(0)"/>
				<p:menuitem id="mnuNuevaPlantilla" value="#{msg['botones.nuevo']}" icon="fa fa-file" process="@this" onclick="document.getElementById('form:btnNuevaPlantilla').click();" />
				<p:menuitem id="mnuEditarPlantilla" value="#{msg['botones.editar']}" icon="fa fa-edit" process="@this" onclick="document.getElementById('form:btnEditarPlantilla').click();"/>
				<p:menuitem id="mnuEliminarPlantilla" value="#{msg['botones.eliminar']}" icon="fa fa-trash-o" process="@this" onclick="document.getElementById('form:btnEliminarPlantilla').click();" />

				<p:menuitem id="mnuConsultarPlantilla" value="#{msg['botones.consultar']}" icon="fa fa-trash-o" process="@this" onclick="document.getElementById('form:btnConsultarPlantilla').click();" />
				<p:menuitem id="mnuFilesPlantilla" value="#{msg['dialogPropiedadesFormulario.botonIdioma']}" icon="fa fa-trash-o" process="@this" onclick="document.getElementById('form:filesPlantilla').click();" />
            </p:contextMenu>
            <pe:clipboard id="clipContextCopyPlantillas" trigger="mnuCopyPlantilla" action="copy" target="auxCopiar">
                <p:ajax event="success" listener="#{dialogPropiedadesFormulario.copiadoCorr}" process="@this" update="@this growlDialog"/>
                <p:ajax event="error" listener="#{dialogPropiedadesFormulario.copiadoErr}" update="@this growlDialog"/>
            </pe:clipboard>

	</h:form>
</h:body>

</f:view>
</html>
